(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{Zzhu:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("mrSG"),o=e("ZZ/e"),i=e("H+bZ"),r=e("67Y/"),s=function(){return function(n){Object.assign(this,n)}}(),c=function(){function n(n){this.apiService=n}return n.prototype.getAll=function(){return this.apiService.get("/categories",!0).pipe(Object(r.a)(function(n){for(var l=[],e=0,t=n;e<t.length;e++)l.push(new s(t[e]));return l}))},n.prototype.getLastCategoryUsed=function(){return this.apiService.get("/categories/last",!0).pipe(Object(r.a)(function(n){for(var l=[],e=0,t=n;e<t.length;e++)l.push(new s(t[e]));return l}))},n.prototype.sendSuggestion=function(n){return this.apiService.post("/categories/suggestions",{name:n},!0)},n.ngInjectableDef=t.S({factory:function(){return new n(t.W(i.a))},token:n,providedIn:"root"}),n}(),a=e("IfdK"),g=e("RLCp"),b=function(){function n(n,l,e,t,u,o,i){this.toastCtrl=n,this.router=l,this.loadingController=e,this.categoryService=t,this.sessionService=u,this.modalController=o,this.el=i,this.categories=[],this.selectedCategories=[],this.lastCategories=[],this.suggestion=null,this.suggesting=!1,this.otherCheckbox=!1}return n.prototype.ngOnInit=function(){},n.prototype.toggleSelectedCategory=function(n){var l=this.selectedCategories.findIndex(function(l){return l.id===n.id});-1!==l?this.selectedCategories.splice(l,1):this.selectedCategories.push(n)},n.prototype.startSession=function(){return u.b(this,void 0,void 0,function(){var n,l=this;return u.e(this,function(e){switch(e.label){case 0:return this.selectedCategories.length<2?[4,this.toastCtrl.create({animated:!0,position:"top",message:"Seleziona almeno 2 categorie.",duration:2e3})]:[3,2];case 1:return e.sent().present(),[2];case 2:return[4,this.loadingController.create()];case 3:return[4,(n=e.sent()).present()];case 4:return e.sent(),this.sessionService.start(this.selectedCategories).subscribe(function(e){return u.b(l,void 0,void 0,function(){return u.e(this,function(l){switch(l.label){case 0:return[4,n.remove()];case 1:return l.sent(),this.router.navigateByUrl("/quote/start_session/article"),[2]}})})},function(e){return u.b(l,void 0,void 0,function(){return u.e(this,function(l){switch(l.label){case 0:return[4,n.remove()];case 1:return l.sent(),[2]}})})}),[2]}})})},n.prototype.displayModalConfirmation=function(){return u.b(this,void 0,void 0,function(){return u.e(this,function(n){switch(n.label){case 0:return[4,this.modalController.create({component:g.a,showBackdrop:!0,cssClass:"category-suggestion-modal"})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},n.prototype.ionViewWillEnter=function(){return u.b(this,void 0,void 0,function(){var n,l=this;return u.e(this,function(e){switch(e.label){case 0:return this.categoryContainer=this.el.nativeElement.querySelector("#category-container"),[4,this.loadingController.create()];case 1:return[4,(n=e.sent()).present()];case 2:return e.sent(),this.categoryService.getLastCategoryUsed().subscribe(function(e){return u.b(l,void 0,void 0,function(){var l=this;return u.e(this,function(t){return this.lastCategories=e,this.selectedCategories=e,this.categoryService.getAll().subscribe(function(e){return u.b(l,void 0,void 0,function(){return u.e(this,function(l){switch(l.label){case 0:return this.categories=e,[4,n.remove()];case 1:return l.sent(),[2]}})})},function(e){return u.b(l,void 0,void 0,function(){return u.e(this,function(l){switch(l.label){case 0:return[4,n.remove()];case 1:return l.sent(),[2]}})})}),[2]})})},function(){return u.b(l,void 0,void 0,function(){return u.e(this,function(l){switch(l.label){case 0:return[4,n.remove()];case 1:return l.sent(),[2]}})})}),[2]}})})},n.prototype.sendSuggestion=function(){return u.b(this,void 0,void 0,function(){var n;return u.e(this,function(l){switch(l.label){case 0:return[4,this.loadingController.create()];case 1:return[4,(n=l.sent()).present()];case 2:return l.sent(),[4,this.categoryService.sendSuggestion(this.suggestion)];case 3:return l.sent(),[4,n.remove()];case 4:return l.sent(),[4,this.displayModalConfirmation()];case 5:return l.sent(),[2]}})})},n.prototype.categorySuggestion=function(){this.sendSuggestion(),this.suggestion=null,this.otherCheckbox=!1},n.prototype.lastSessionUsed=function(n){for(var l=0,e=this.lastCategories;l<e.length;l++)if(e[l].id===n.id)return!0;return!1},n.prototype.isSuggesting=function(){return this.suggesting},n.prototype.toggleCategorySuggestion=function(){this.suggesting=!this.suggesting},n}(),h=function(){return function(){}}(),d=e("pMnS"),p=e("oBZk"),f=e("gIcY"),C=e("Ip0R"),v=e("A7o+"),m=e("ZYCi"),k=e("ypx6"),y=e("qjUB"),x=t.nb({encapsulation:0,styles:[['ion-content[_ngcontent-%COMP%]{--overflow:hidden}app-scroll-indicator[_ngcontent-%COMP%]{bottom:20px;right:20px}ion-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:.6em;padding-top:5px}#scroll-container[_ngcontent-%COMP%]{height:calc(100% - 60px);position:relative;overflow:hidden}#category-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;overflow:auto;padding:20px}#category-suggestion[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;background:#fff;padding:5px 20px;z-index:100;height:60px}#category-suggestion[_ngcontent-%COMP%]   #category-suggestion-inner[_ngcontent-%COMP%]{padding:9px;border:1px solid #ccc;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-radius:20px}#category-suggestion[_ngcontent-%COMP%]   #category-suggestion-inner[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{margin:0 10px;--padding-left:0;--padding-right:0;--padding-top:0;--padding-bottom:0;font-family:"Playfair Display",sans-serif}#category-suggestion[_ngcontent-%COMP%]   #category-suggestion-inner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:30px;height:30px;background:-webkit-gradient(linear,left top,right top,from(#18288e),to(#2f76b4));background:linear-gradient(to right,#18288e,#2f76b4);border-radius:50%;color:#fff}']],data:{}});function z(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t.pb(1,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.pb(2,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),t.Gb(3,null,["(",")"]))],null,function(n,l){n(l,3,0,l.parent.context.$implicit.description)})}function w(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,10,"ion-item",[],null,null,null,p.J,p.l)),t.ob(1,49152,null,0,o.F,[t.h,t.k,t.z],null,null),(n()(),t.pb(2,0,null,0,3,"ion-checkbox",[],null,[[null,"ionChange"],[null,"ionBlur"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,5)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,5)._handleIonChange(e.target.checked)&&u),"ionChange"===l&&(u=!1!==o.toggleSelectedCategory(n.context.$implicit)&&u),u},p.B,p.d)),t.Db(5120,null,f.f,function(n){return[n]},[o.b]),t.ob(4,49152,null,0,o.p,[t.h,t.k,t.z],{checked:[0,"checked"],value:[1,"value"]},null),t.ob(5,16384,null,0,o.b,[t.k],null,null),(n()(),t.pb(6,0,null,0,4,"ion-label",[],null,null,null,p.K,p.m)),t.ob(7,49152,null,0,o.L,[t.h,t.k,t.z],null,null),(n()(),t.Gb(8,0,[" "," "])),(n()(),t.gb(16777216,null,0,1,null,z)),t.ob(10,16384,null,0,C.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,4,0,l.component.lastSessionUsed(l.context.$implicit),t.rb(1,"",l.context.$implicit.id,"")),n(l,10,0,l.context.$implicit.description)},function(n,l){n(l,8,0,l.context.$implicit.name)})}function S(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t.pb(1,0,null,null,3,"ion-button",[["class","fixed bottom confirm-button"],["color","secondary"],["expand","full"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.startSession()&&t),t},p.z,p.b)),t.ob(2,49152,null,0,o.i,[t.h,t.k,t.z],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Gb(3,0,["",""])),t.Bb(131072,v.i,[v.j,t.h])],function(n,l){n(l,2,0,"secondary","full")},function(n,l){n(l,3,0,t.Hb(l,3,0,t.zb(l,4).transform("confirm")))})}function O(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,12,null,null,null,null,null,null,null)),(n()(),t.pb(1,0,null,null,11,"div",[["id","category-suggestion"]],null,null,null,null,null)),(n()(),t.pb(2,0,null,null,10,"div",[["id","category-suggestion-inner"]],null,null,null,null,null)),(n()(),t.pb(3,0,null,null,7,"ion-input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,4)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,4)._handleInputEvent(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.suggestion=e)&&u),u},p.I,p.k)),t.ob(4,16384,null,0,o.Lb,[t.k],null,null),t.Db(1024,null,f.f,function(n){return[n]},[o.Lb]),t.ob(6,671744,null,0,f.j,[[8,null],[8,null],[8,null],[6,f.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,f.g,null,[f.j]),t.ob(8,16384,null,0,f.h,[[4,f.g]],null,null),t.ob(9,49152,null,0,o.E,[t.h,t.k,t.z],{placeholder:[0,"placeholder"]},null),t.Bb(131072,v.i,[v.j,t.h]),(n()(),t.pb(11,0,null,null,1,"ion-icon",[["name","add"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.categorySuggestion()&&t),t},p.G,p.i)),t.ob(12,49152,null,0,o.A,[t.h,t.k,t.z],{name:[0,"name"]},null)],function(n,l){n(l,6,0,l.component.suggestion),n(l,9,0,t.Hb(l,9,0,t.zb(l,10).transform("suggest_category"))),n(l,12,0,"add")},function(n,l){n(l,3,0,t.zb(l,8).ngClassUntouched,t.zb(l,8).ngClassTouched,t.zb(l,8).ngClassPristine,t.zb(l,8).ngClassDirty,t.zb(l,8).ngClassValid,t.zb(l,8).ngClassInvalid,t.zb(l,8).ngClassPending)})}function M(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,21,"ion-header",[],null,null,null,p.F,p.h)),t.ob(1,49152,null,0,o.z,[t.h,t.k,t.z],null,null),(n()(),t.pb(2,0,null,0,19,"ion-toolbar",[],null,null,null,p.V,p.x)),t.ob(3,49152,null,0,o.zb,[t.h,t.k,t.z],null,null),(n()(),t.pb(4,0,null,0,7,"ion-buttons",[["slot","start"]],null,null,null,p.A,p.c)),t.ob(5,49152,null,0,o.j,[t.h,t.k,t.z],null,null),(n()(),t.pb(6,0,null,0,5,"ion-button",[["routerDirection","back"],["routerLink","/home"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.zb(n,8).onClick()&&u),"click"===l&&(u=!1!==t.zb(n,9).onClick(e)&&u),u},p.z,p.b)),t.ob(7,49152,null,0,o.i,[t.h,t.k,t.z],{routerDirection:[0,"routerDirection"]},null),t.ob(8,16384,null,0,m.n,[m.m,m.a,[8,null],t.D,t.k],{routerLink:[0,"routerLink"]},null),t.ob(9,737280,null,0,o.Jb,[C.g,o.Fb,t.k,m.m,[2,m.n]],{routerDirection:[0,"routerDirection"]},null),(n()(),t.pb(10,0,null,0,1,"ion-icon",[["name","arrow-back"]],null,null,null,p.G,p.i)),t.ob(11,49152,null,0,o.A,[t.h,t.k,t.z],{name:[0,"name"]},null),(n()(),t.pb(12,0,null,0,9,"ion-title",[],null,null,null,p.U,p.w)),t.ob(13,49152,null,0,o.xb,[t.h,t.k,t.z],null,null),(n()(),t.Gb(14,0,[""," "])),t.Bb(131072,v.i,[v.j,t.h]),(n()(),t.pb(16,0,null,0,2,"em",[],null,null,null,null,null)),(n()(),t.Gb(17,null,["",""])),t.Bb(131072,v.i,[v.j,t.h]),(n()(),t.pb(19,0,null,0,2,"small",[],null,null,null,null,null)),(n()(),t.Gb(20,null,["(",")"])),t.Bb(131072,v.i,[v.j,t.h]),(n()(),t.pb(22,0,null,null,22,"ion-content",[["forceOverscroll","false"]],null,null,null,p.D,p.f)),t.ob(23,49152,null,0,o.s,[t.h,t.k,t.z],{forceOverscroll:[0,"forceOverscroll"]},null),(n()(),t.pb(24,0,null,0,20,"div",[["id","scroll-container"]],null,null,null,null,null)),(n()(),t.pb(25,0,null,null,17,"div",[["id","category-container"]],null,null,null,null,null)),(n()(),t.pb(26,0,null,null,16,"ion-list",[["lines","none"]],null,null,null,p.L,p.n)),t.ob(27,49152,null,0,o.M,[t.h,t.k,t.z],{lines:[0,"lines"]},null),(n()(),t.gb(16777216,null,0,1,null,w)),t.ob(29,278528,null,0,C.i,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.pb(30,0,null,0,12,"ion-item",[],null,null,null,p.J,p.l)),t.ob(31,49152,null,0,o.F,[t.h,t.k,t.z],null,null),(n()(),t.pb(32,0,null,0,6,"ion-checkbox",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,33)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,33)._handleIonChange(e.target.checked)&&u),"ngModelChange"===l&&(u=!1!==(o.otherCheckbox=e)&&u),"ionChange"===l&&(u=!1!==o.toggleCategorySuggestion()&&u),u},p.B,p.d)),t.ob(33,16384,null,0,o.b,[t.k],null,null),t.Db(1024,null,f.f,function(n){return[n]},[o.b]),t.ob(35,671744,null,0,f.j,[[8,null],[8,null],[8,null],[6,f.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,f.g,null,[f.j]),t.ob(37,16384,null,0,f.h,[[4,f.g]],null,null),t.ob(38,49152,null,0,o.p,[t.h,t.k,t.z],null,null),(n()(),t.pb(39,0,null,0,3,"ion-label",[],null,null,null,p.K,p.m)),t.ob(40,49152,null,0,o.L,[t.h,t.k,t.z],null,null),(n()(),t.Gb(41,0,["",""])),t.Bb(131072,v.i,[v.j,t.h]),(n()(),t.pb(43,0,null,null,1,"app-scroll-indicator",[],null,null,null,k.b,k.a)),t.ob(44,114688,null,0,y.a,[],{container:[0,"container"]},null),(n()(),t.gb(16777216,null,null,1,null,S)),t.ob(46,16384,null,0,C.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,null,1,null,O)),t.ob(48,16384,null,0,C.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,7,0,"back"),n(l,8,0,"/home"),n(l,9,0,"back"),n(l,11,0,"arrow-back"),n(l,23,0,"false"),n(l,27,0,"none"),n(l,29,0,e.categories),n(l,35,0,e.otherCheckbox),n(l,44,0,e.categoryContainer),n(l,46,0,!e.isSuggesting()),n(l,48,0,e.isSuggesting())},function(n,l){n(l,14,0,t.Hb(l,14,0,t.zb(l,15).transform("select"))),n(l,17,0,t.Hb(l,17,0,t.zb(l,18).transform("categories"))),n(l,20,0,t.Hb(l,20,0,t.zb(l,21).transform("minimum_of_2"))),n(l,32,0,t.zb(l,37).ngClassUntouched,t.zb(l,37).ngClassTouched,t.zb(l,37).ngClassPristine,t.zb(l,37).ngClassDirty,t.zb(l,37).ngClassValid,t.zb(l,37).ngClassInvalid,t.zb(l,37).ngClassPending),n(l,41,0,t.Hb(l,41,0,t.zb(l,42).transform("other")))})}function I(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"app-user-categories",[],null,null,null,M,x)),t.ob(1,114688,null,0,b,[o.Mb,m.m,o.Db,c,a.a,o.Eb,t.k],null,null)],function(n,l){n(l,1,0)},null)}var _=t.lb("app-user-categories",b,I,{},{},[]),j=e("fA50");e.d(l,"UserCategoriesPageModuleNgFactory",function(){return B});var B=t.mb(h,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[d.a,_]],[3,t.j],t.x]),t.xb(4608,C.l,C.k,[t.u,[2,C.u]]),t.xb(4608,f.o,f.o,[]),t.xb(4608,o.a,o.a,[t.z,t.g]),t.xb(4608,o.Eb,o.Eb,[o.a,t.j,t.q]),t.xb(4608,o.Hb,o.Hb,[o.a,t.j,t.q]),t.xb(4608,f.b,f.b,[]),t.xb(1073742336,C.b,C.b,[]),t.xb(1073742336,f.m,f.m,[]),t.xb(1073742336,f.e,f.e,[]),t.xb(1073742336,o.Bb,o.Bb,[]),t.xb(1073742336,f.k,f.k,[]),t.xb(1073742336,m.o,m.o,[[2,m.u],[2,m.m]]),t.xb(1073742336,v.g,v.g,[]),t.xb(1073742336,j.a,j.a,[]),t.xb(1073742336,h,h,[]),t.xb(1024,m.k,function(){return[[{path:"",component:b}]]},[])])})}}]);